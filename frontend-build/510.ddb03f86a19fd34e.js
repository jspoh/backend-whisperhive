"use strict";(self.webpackChunksocial_media=self.webpackChunksocial_media||[]).push([[510],{1510:(tt,F,u)=>{u.r(F),u.d(F,{ProfileModule:()=>M});var g=u(6895),x=u(7550),ee=u(1135),A=u(7579),J=u(2722),te=u(9300),ie=u(4004),U=u(5698),e=u(8274),Y=u(2480),ne=u(5610),N=u(8077);function se(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onFollowAction(!0))}),e._UZ(1,"i",23),e.qZA()}}function oe(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",17,16),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.onFollowAction(!1))}),e._UZ(2,"i",24),e.qZA()}}function re(n,s){if(1&n){const t=e.EpF();e.TgZ(0,"div",4)(1,"div",5),e._UZ(2,"img",6)(3,"img",7),e.qZA(),e.TgZ(4,"div",8)(5,"p",9),e._uU(6),e.qZA(),e.TgZ(7,"p",10),e._uU(8),e.qZA()(),e.TgZ(9,"div",11)(10,"p",12),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onWhispersClicked())}),e._uU(11),e.qZA(),e.TgZ(12,"p",13),e._uU(13),e.qZA(),e.TgZ(14,"p",13),e._uU(15),e.qZA()(),e.TgZ(16,"div",14),e.YNc(17,se,2,0,"div",15),e.YNc(18,oe,3,0,"ng-template",null,16,e.W1O),e.TgZ(20,"div",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onMessage())}),e._UZ(21,"i",18),e.qZA(),e.TgZ(22,"div",17),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onOptions())}),e._UZ(23,"i",19),e.qZA()(),e.TgZ(24,"div",20),e._UZ(25,"i",21),e._uU(26," 04 October 2000 "),e.qZA(),e.TgZ(27,"div",22),e._uU(28," Lorem ipsum dolor sit amet consectetur adipisicing elit. Eos neque voluptate debitis animi et dolor, earum amet quo excepturi aspernatur beatae laboriosam ad commodi eligendi minus voluptatibus itaque sequi quidem iusto reiciendis? Rem fugiat molestias debitis assumenda dicta perspiciatis placeat possimus voluptate at doloremque ipsa illum, magni ullam minima soluta. "),e.qZA()()}if(2&n){const t=e.MAs(19),i=e.oxw();e.xp6(6),e.hij("@",i.userData.username,""),e.xp6(2),e.Oqu(i.userData.name),e.xp6(3),e.AsE(" ",i.userData.data.posts.length," ",1===i.userData.data.posts.length?"Whisper":"Whispers"," "),e.xp6(2),e.hij(" ",i.userData.data.followerList.length," Followers "),e.xp6(2),e.hij(" ",i.userData.data.followingList.length," Following "),e.xp6(2),e.Q6J("ngIf",!i.isFollowing)("ngIfElse",t)}}function le(n,s){1&n&&e._uU(0,"mdCard")}function ae(n,s){1&n&&e._uU(0,"smCard")}class q{constructor(s,t){this.router=s,this.userService=t,this.userData={username:"",name:"",data:{currentUser:"",followingList:[],followerList:[],posts:[]}},this.whispersClicked=new e.vpe,this.isFollowing=!1,this.cardSize="lg"}ngOnInit(){}onFollowAction(s){this.userService.userIsLoggedIn$.getValue()||this.userService.onUserNotLoggedInAction()}onMessage(){this.userService.userIsLoggedIn$.getValue()||this.userService.onUserNotLoggedInAction()}onOptions(){this.userService.userIsLoggedIn$.getValue()||this.userService.onUserNotLoggedInAction()}onWhispersClicked(){this.whispersClicked.emit()}}q.\u0275fac=function(s){return new(s||q)(e.Y36(x.F0),e.Y36(N.K))},q.\u0275cmp=e.Xpm({type:q,selectors:[["app-profile-card"]],inputs:{userData:"userData",cardSize:"cardSize"},outputs:{whispersClicked:"whispersClicked"},decls:7,vars:1,consts:[[3,"ngTemplateOutlet"],["lgCard",""],["mdCard",""],["smCard",""],[1,"bg-slate-200","rounded-2xl","shadow-2xl","relative"],[1,"flex","flex-col","items-center","relative","h-[24rem]"],["src","https://t3.ftcdn.net/jpg/02/48/42/64/360_F_248426448_NVKLywWqArG2ADUxDq6QprtIzsF82dMF.jpg","alt","cover photo",1,"w-full","h-60","object-cover"],["src","https://image.kpopmap.com/2019/02/IU-LILAC.jpg","alt","",1,"rounded-full","w-52","h-52","absolute","top-28","shadow-2xl"],[1,"text-lg","mx-auto","w-max","-mt-12"],[1,"text-center","font-bold"],[1,"text-center","font-semibold"],[1,"flex","justify-between","my-8","w-1/2","mx-auto","text-lg"],[1,"h-8","cursor-pointer",3,"click"],[1,"h-8","cursor-pointer"],[1,"absolute","right-20","top-72","flex","gap-4"],["class","border rounded-full border-black w-10 h-10 flex justify-center items-center cursor-pointer hover:bg-slate-300 transition-colors",3,"click",4,"ngIf","ngIfElse"],["unfollowBtn",""],[1,"border","rounded-full","border-black","w-10","h-10","flex","justify-center","items-center","cursor-pointer","hover:bg-slate-300","transition-colors",3,"click"],[1,"fa-solid","fa-comment"],[1,"fa-solid","fa-ellipsis"],[1,"absolute","top-[18.875rem]","left-20"],[1,"fa-solid","fa-cake-candles"],[1,"py-8","px-16","-mt-12"],[1,"fa-solid","fa-user-plus"],[1,"fa-solid","fa-user-minus"]],template:function(s,t){if(1&s&&(e.GkF(0,0),e.YNc(1,re,29,8,"ng-template",null,1,e.W1O),e.YNc(3,le,1,0,"ng-template",null,2,e.W1O),e.YNc(5,ae,1,0,"ng-template",null,3,e.W1O)),2&s){const i=e.MAs(2);e.Q6J("ngTemplateOutlet",i)}},dependencies:[g.O5,g.tP]});var w=u(433);function R(n,s,t,i,o,r,l){try{var a=n[r](l),c=a.value}catch(p){return void t(p)}a.done?s(c):Promise.resolve(c).then(i,o)}function H(n){return function(){var s=this,t=arguments;return new Promise(function(i,o){var r=n.apply(s,t);function l(c){R(r,i,o,l,a,"next",c)}function a(c){R(r,i,o,l,a,"throw",c)}l(void 0)})}}const D={toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},j=new e.OlP("config",{providedIn:"root",factory:()=>({modules:D})});var Q=u(1481),ue=u(9770),$=u(9751),v=u(576);function ce(n){return!!n&&(n instanceof $.y||(0,v.m)(n.lift)&&(0,v.m)(n.subscribe))}var de=u(6805),he=u(930);function fe(n,s){const t="object"==typeof s;return new Promise((i,o)=>{const r=new he.Hp({next:l=>{i(l),r.unsubscribe()},error:o,complete:()=>{t?i(s.defaultValue):o(new de.K)}});n.subscribe(r)})}var B=u(727),me=u(8421),V=u(5577),pe=u(1144),ge=u(3268);const ve=["addListener","removeListener"],Ce=["addEventListener","removeEventListener"],be=["on","off"];function S(n,s,t,i){if((0,v.m)(t)&&(i=t,t=void 0),i)return S(n,s,t).pipe((0,ge.Z)(i));const[o,r]=function we(n){return(0,v.m)(n.addEventListener)&&(0,v.m)(n.removeEventListener)}(n)?Ce.map(l=>a=>n[l](s,a,t)):function ye(n){return(0,v.m)(n.addListener)&&(0,v.m)(n.removeListener)}(n)?ve.map(G(n,s)):function xe(n){return(0,v.m)(n.on)&&(0,v.m)(n.off)}(n)?be.map(G(n,s)):[];if(!o&&(0,pe.z)(n))return(0,V.z)(l=>S(l,s,t))((0,me.Xf)(n));if(!o)throw new TypeError("Invalid event target");return new $.y(l=>{const a=(...c)=>l.next(1<c.length?c:c[0]);return o(a),()=>r(a)})}function G(n,s){return t=>i=>n[t](s,i)}const k={now:()=>(k.delegate||Date).now(),delegate:void 0};class Ee extends A.x{constructor(s=1/0,t=1/0,i=k){super(),this._bufferSize=s,this._windowTime=t,this._timestampProvider=i,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,s),this._windowTime=Math.max(1,t)}next(s){const{isStopped:t,_buffer:i,_infiniteTimeWindow:o,_timestampProvider:r,_windowTime:l}=this;t||(i.push(s),!o&&i.push(r.now()+l)),this._trimBuffer(),super.next(s)}_subscribe(s){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(s),{_infiniteTimeWindow:i,_buffer:o}=this,r=o.slice();for(let l=0;l<r.length&&!s.closed;l+=i?1:2)s.next(r[l]);return this._checkFinalizedStatuses(s),t}_trimBuffer(){const{_bufferSize:s,_timestampProvider:t,_buffer:i,_infiniteTimeWindow:o}=this,r=(o?1:2)*s;if(s<1/0&&r<i.length&&i.splice(0,i.length-r),!o){const l=t.now();let a=0;for(let c=1;c<i.length&&i[c]<=l;c+=2)a=c;a&&i.splice(0,a+1)}}}var _e=u(3099);class Me extends B.w0{constructor(s,t){super()}schedule(s,t=0){return this}}const z={setInterval(n,s,...t){const{delegate:i}=z;return i?.setInterval?i.setInterval(n,s,...t):setInterval(n,s,...t)},clearInterval(n){const{delegate:s}=z;return(s?.clearInterval||clearInterval)(n)},delegate:void 0};var qe=u(8737);class O{constructor(s,t=O.now){this.schedulerActionCtor=s,this.now=t}schedule(s,t=0,i){return new this.schedulerActionCtor(this,s).schedule(i,t)}}O.now=k.now;const Ie=new class Oe extends O{constructor(s,t=O.now){super(s,t),this.actions=[],this._active=!1}flush(s){const{actions:t}=this;if(this._active)return void t.push(s);let i;this._active=!0;do{if(i=s.execute(s.state,s.delay))break}while(s=t.shift());if(this._active=!1,i){for(;s=t.shift();)s.unsubscribe();throw i}}}(class Se extends Me{constructor(s,t){super(s,t),this.scheduler=s,this.work=t,this.pending=!1}schedule(s,t=0){var i;if(this.closed)return this;this.state=s;const o=this.id,r=this.scheduler;return null!=o&&(this.id=this.recycleAsyncId(r,o,t)),this.pending=!0,this.delay=t,this.id=null!==(i=this.id)&&void 0!==i?i:this.requestAsyncId(r,this.id,t),this}requestAsyncId(s,t,i=0){return z.setInterval(s.flush.bind(s,this),i)}recycleAsyncId(s,t,i=0){if(null!=i&&this.delay===i&&!1===this.pending)return t;null!=t&&z.clearInterval(t)}execute(s,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(s,t);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,t){let o,i=!1;try{this.work(s)}catch(r){i=!0,o=r||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){const{id:s,scheduler:t}=this,{actions:i}=t;this.work=this.state=this.scheduler=null,this.pending=!1,(0,qe.P)(i,this),null!=s&&(this.id=this.recycleAsyncId(t,s,null)),this.delay=null,super.unsubscribe()}}});var Pe=u(4482),Le=u(5403);function W(n,s=Ie){return(0,Pe.e)((t,i)=>{let o=null,r=null,l=null;const a=()=>{if(o){o.unsubscribe(),o=null;const p=r;r=null,i.next(p)}};function c(){const p=l+n,d=s.now();if(d<p)return o=this.schedule(void 0,p-d),void i.add(o);a()}t.subscribe((0,Le.x)(i,p=>{r=p,l=s.now(),o||(o=s.schedule(c,n),i.add(o))},()=>{a(),i.complete()},void 0,()=>{r=o=null}))})}function Ae(n,s){1&n&&e._UZ(0,"div",2)}function Qe(n,s){1&n&&e._UZ(0,"pre",2)}function ze(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Ae,1,0,"div",1),e.YNc(2,Qe,1,0,"pre",1),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.preserve),e.xp6(1),e.Q6J("ngIf",t.preserve)}}function Ze(n,s){1&n&&e._UZ(0,"div",2)}function De(n,s){1&n&&e._UZ(0,"pre",2)}function Ve(n,s){if(1&n&&(e.ynx(0),e.YNc(1,Ze,1,0,"div",1),e.YNc(2,De,1,0,"pre",1),e.BQk()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",!t.preserve),e.xp6(1),e.Q6J("ngIf",t.preserve)}}const ke=[[["","quill-editor-toolbar",""]]],Fe=["[quill-editor-toolbar]"];function Je(n,s){1&n&&e._UZ(0,"div",1)}function Ue(n,s){1&n&&e._UZ(0,"pre",1)}const I=(n,s)=>n||s||"html";let Z=(()=>{class n{constructor(t,i){var o=this;this.config=i,this.quill$=(0,ue.P)(H(function*(){if(!o.Quill){const r=o.document.addEventListener;o.document.addEventListener=o.document.__zone_symbol__addEventListener||o.document.addEventListener;const l=yield u.e(971).then(u.t.bind(u,9971,19));o.document.addEventListener=r,o.Quill=l.default?l.default:l}return o.config.customOptions?.forEach(r=>{const l=o.Quill.import(r.import);l.whitelist=r.whitelist,o.Quill.register(l,!0,o.config.suppressGlobalRegisterWarning)}),yield o.registerCustomModules(o.Quill,o.config.customModules,o.config.suppressGlobalRegisterWarning)})).pipe(function Te(n,s,t){let i,o=!1;return n&&"object"==typeof n?({bufferSize:i=1/0,windowTime:s=1/0,refCount:o=!1,scheduler:t}=n):i=n??1/0,(0,_e.B)({connector:()=>new Ee(i,s,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}({bufferSize:1,refCount:!0})),this.document=t.get(g.K0),this.config||(this.config={modules:D})}getQuill(){return this.quill$}registerCustomModules(t,i,o){return H(function*(){if(Array.isArray(i))for(let{implementation:r,path:l}of i)ce(r)&&(r=yield fe(r)),t.register(l,r,o);return t})()}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(e.zs3),e.LFG(j,8))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ye=(()=>{class n{constructor(t,i,o,r,l,a,c,p){this.elementRef=i,this.cd=o,this.domSanitizer=r,this.platformId=l,this.renderer=a,this.zone=c,this.service=p,this.required=!1,this.customToolbarPosition="top",this.styles=null,this.strict=!0,this.customOptions=[],this.customModules=[],this.preserveWhitespace=!1,this.trimOnValidation=!1,this.compareValues=!1,this.filterNull=!1,this.defaultEmptyValue=null,this.onEditorCreated=new e.vpe,this.onEditorChanged=new e.vpe,this.onContentChanged=new e.vpe,this.onSelectionChanged=new e.vpe,this.onFocus=new e.vpe,this.onBlur=new e.vpe,this.disabled=!1,this.preserve=!1,this.toolbarPosition="top",this.subscription=null,this.quillSubscription=null,this.valueGetter=(d,h)=>{let f=h.querySelector(".ql-editor").innerHTML;("<p><br></p>"===f||"<div><br></div>"===f)&&(f=this.defaultEmptyValue);let m=f;const C=I(this.format,this.service.config.format);if("text"===C)m=d.getText();else if("object"===C)m=d.getContents();else if("json"===C)try{m=JSON.stringify(d.getContents())}catch{m=d.getText()}return m},this.valueSetter=(d,h)=>{const f=I(this.format,this.service.config.format);if("html"===f)return([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(h=this.domSanitizer.sanitize(e.q3G.HTML,h)),d.clipboard.convert(h);if("json"===f)try{return JSON.parse(h)}catch{return[{insert:h}]}return h},this.selectionChangeHandler=(d,h,f)=>{const m=!d&&!!this.onModelTouched;!this.onBlur.observed&&!this.onFocus.observed&&!this.onSelectionChanged.observed&&!m||this.zone.run(()=>{null===d?this.onBlur.emit({editor:this.quillEditor,source:f}):null===h&&this.onFocus.emit({editor:this.quillEditor,source:f}),this.onSelectionChanged.emit({editor:this.quillEditor,oldRange:h,range:d,source:f}),m&&this.onModelTouched(),this.cd.markForCheck()})},this.textChangeHandler=(d,h,f)=>{const m=this.quillEditor.getText(),C=this.quillEditor.getContents();let b=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===b||"<div><br></div>"===b)&&(b=this.defaultEmptyValue);const y=this.trackChanges||this.service.config.trackChanges,X=("user"===f||y&&"all"===y)&&!!this.onModelChange;!this.onContentChanged.observed&&!X||this.zone.run(()=>{X&&this.onModelChange(this.valueGetter(this.quillEditor,this.editorElem)),this.onContentChanged.emit({content:C,delta:d,editor:this.quillEditor,html:b,oldDelta:h,source:f,text:m}),this.cd.markForCheck()})},this.editorChangeHandler=(d,h,f,m)=>{if(this.onEditorChanged.observed)if("text-change"===d){const C=this.quillEditor.getText(),b=this.quillEditor.getContents();let y=this.editorElem.querySelector(".ql-editor").innerHTML;("<p><br></p>"===y||"<div><br></div>"===y)&&(y=this.defaultEmptyValue),this.zone.run(()=>{this.onEditorChanged.emit({content:b,delta:h,editor:this.quillEditor,event:d,html:y,oldDelta:f,source:m,text:C}),this.cd.markForCheck()})}else this.zone.run(()=>{this.onEditorChanged.emit({editor:this.quillEditor,event:d,oldRange:f,range:h,source:m}),this.cd.markForCheck()})},this.document=t.get(g.K0)}static normalizeClassNames(t){return t.trim().split(" ").reduce((o,r)=>{const l=r.trim();return l&&o.push(l),o},[])}ngOnInit(){this.preserve=this.preserveWhitespace,this.toolbarPosition=this.customToolbarPosition}ngAfterViewInit(){(0,g.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,V.z)(t=>{const i=[this.service.registerCustomModules(t,this.customModules)],o=this.beforeRender??this.service.config.beforeRender;return o&&i.push(o()),Promise.all(i).then(()=>t)})).subscribe(t=>{this.editorElem=this.elementRef.nativeElement.querySelector("[quill-editor-element]");const i=this.elementRef.nativeElement.querySelector("[quill-editor-toolbar]"),o=Object.assign({},this.modules||this.service.config.modules);i?o.toolbar=i:void 0===o.toolbar&&(o.toolbar=D.toolbar);let r=void 0!==this.placeholder?this.placeholder:this.service.config.placeholder;void 0===r&&(r="Insert text here ..."),this.styles&&Object.keys(this.styles).forEach(f=>{this.renderer.setStyle(this.editorElem,f,this.styles[f])}),this.classes&&this.addClasses(this.classes),this.customOptions.forEach(f=>{const m=t.import(f.import);m.whitelist=f.whitelist,t.register(m,!0)});let l=this.bounds&&"self"===this.bounds?this.editorElem:this.bounds;l||(l=this.service.config.bounds?this.service.config.bounds:this.document.body);let a=this.debug;!a&&!1!==a&&this.service.config.debug&&(a=this.service.config.debug);let c=this.readOnly;!c&&!1!==this.readOnly&&(c=void 0!==this.service.config.readOnly&&this.service.config.readOnly);let p=this.defaultEmptyValue;this.service.config.hasOwnProperty("defaultEmptyValue")&&(p=this.service.config.defaultEmptyValue);let d=this.scrollingContainer;!d&&null!==this.scrollingContainer&&(d=null===this.service.config.scrollingContainer||this.service.config.scrollingContainer?this.service.config.scrollingContainer:null);let h=this.formats;if(!h&&void 0===h&&(h=this.service.config.formats?[...this.service.config.formats]:null===this.service.config.formats?null:void 0),this.zone.runOutsideAngular(()=>{if(this.quillEditor=new t(this.editorElem,{bounds:l,debug:a,formats:h,modules:o,placeholder:r,readOnly:c,defaultEmptyValue:p,scrollingContainer:d,strict:this.strict,theme:this.theme||(this.service.config.theme?this.service.config.theme:"snow")}),this.linkPlaceholder){const m=this.quillEditor?.theme?.tooltip?.root?.querySelector("input[data-link]");m?.dataset&&(m.dataset.link=this.linkPlaceholder)}}),this.content){if("text"===I(this.format,this.service.config.format))this.quillEditor.setText(this.content,"silent");else{const m=this.valueSetter(this.quillEditor,this.content);this.quillEditor.setContents(m,"silent")}this.quillEditor.getModule("history").clear()}this.setDisabledState(),this.addQuillEventListeners(),(this.onEditorCreated.observed||this.onValidatorChanged)&&requestAnimationFrame(()=>{this.onValidatorChanged&&this.onValidatorChanged(),this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.dispose(),this.quillSubscription?.unsubscribe(),this.quillSubscription=null}ngOnChanges(t){if(this.quillEditor){if(t.readOnly&&this.quillEditor.enable(!t.readOnly.currentValue),t.placeholder&&(this.quillEditor.root.dataset.placeholder=t.placeholder.currentValue),t.defaultEmptyValue&&(this.quillEditor.root.dataset.defaultEmptyValue=t.defaultEmptyValue.currentValue),t.styles){const i=t.styles.currentValue,o=t.styles.previousValue;o&&Object.keys(o).forEach(r=>{this.renderer.removeStyle(this.editorElem,r)}),i&&Object.keys(i).forEach(r=>{this.renderer.setStyle(this.editorElem,r,this.styles[r])})}if(t.classes){const i=t.classes.currentValue,o=t.classes.previousValue;o&&this.removeClasses(o),i&&this.addClasses(i)}t.debounceTime&&this.addQuillEventListeners()}}addClasses(t){n.normalizeClassNames(t).forEach(i=>{this.renderer.addClass(this.editorElem,i)})}removeClasses(t){n.normalizeClassNames(t).forEach(i=>{this.renderer.removeClass(this.editorElem,i)})}writeValue(t){if(this.filterNull&&null===t||(this.content=t,!this.quillEditor))return;const i=I(this.format,this.service.config.format),o=this.valueSetter(this.quillEditor,t);if(this.compareValues){const r=this.quillEditor.getContents();if(JSON.stringify(r)===JSON.stringify(o))return}t?"text"===i?this.quillEditor.setText(t):this.quillEditor.setContents(o):this.quillEditor.setText("")}setDisabledState(t=this.disabled){this.disabled=t,this.quillEditor&&(t?(this.quillEditor.disable(),this.renderer.setAttribute(this.elementRef.nativeElement,"disabled","disabled")):(this.readOnly||this.quillEditor.enable(),this.renderer.removeAttribute(this.elementRef.nativeElement,"disabled")))}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}registerOnValidatorChange(t){this.onValidatorChanged=t}validate(){if(!this.quillEditor)return null;const t={};let i=!0;const o=this.quillEditor.getText(),r=this.trimOnValidation?o.trim().length:1===o.length&&0===o.trim().length?0:o.length-1,l=this.quillEditor.getContents().ops,a=l&&1===l.length&&["\n",""].includes(l[0].insert);return this.minLength&&r&&r<this.minLength&&(t.minLengthError={given:r,minLength:this.minLength},i=!1),this.maxLength&&r>this.maxLength&&(t.maxLengthError={given:r,maxLength:this.maxLength},i=!1),this.required&&!r&&a&&(t.requiredError={empty:!0},i=!1),i?null:t}addQuillEventListeners(){this.dispose(),this.zone.runOutsideAngular(()=>{this.subscription=new B.w0,this.subscription.add(S(this.quillEditor,"selection-change").subscribe(([o,r,l])=>{this.selectionChangeHandler(o,r,l)}));let t=S(this.quillEditor,"text-change"),i=S(this.quillEditor,"editor-change");"number"==typeof this.debounceTime&&(t=t.pipe(W(this.debounceTime)),i=i.pipe(W(this.debounceTime))),this.subscription.add(t.subscribe(([o,r,l])=>{this.textChangeHandler(o,r,l)})),this.subscription.add(i.subscribe(([o,r,l,a])=>{this.editorChangeHandler(o,r,l,a)}))})}dispose(){null!==this.subscription&&(this.subscription.unsubscribe(),this.subscription=null)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Q.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(Z))},n.\u0275dir=e.lG2({type:n,inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",readOnly:"readOnly",placeholder:"placeholder",maxLength:"maxLength",minLength:"minLength",required:"required",formats:"formats",customToolbarPosition:"customToolbarPosition",sanitize:"sanitize",beforeRender:"beforeRender",styles:"styles",strict:"strict",scrollingContainer:"scrollingContainer",bounds:"bounds",customOptions:"customOptions",customModules:"customModules",trackChanges:"trackChanges",preserveWhitespace:"preserveWhitespace",classes:"classes",trimOnValidation:"trimOnValidation",linkPlaceholder:"linkPlaceholder",compareValues:"compareValues",filterNull:"filterNull",debounceTime:"debounceTime",defaultEmptyValue:"defaultEmptyValue",valueGetter:"valueGetter",valueSetter:"valueSetter"},outputs:{onEditorCreated:"onEditorCreated",onEditorChanged:"onEditorChanged",onContentChanged:"onContentChanged",onSelectionChanged:"onSelectionChanged",onFocus:"onFocus",onBlur:"onBlur"},features:[e.TTD]}),n})(),K=(()=>{class n extends Ye{constructor(t,i,o,r,l,a,c,p){super(t,i,o,r,l,a,c,p)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.zs3),e.Y36(e.SBq),e.Y36(e.sBO),e.Y36(Q.H7),e.Y36(e.Lbi),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["quill-editor"]],standalone:!0,features:[e._Bn([{multi:!0,provide:w.JU,useExisting:(0,e.Gpc)(()=>n)},{multi:!0,provide:w.Cf,useExisting:(0,e.Gpc)(()=>n)}]),e.qOj,e.jDz],ngContentSelectors:Fe,decls:3,vars:2,consts:[[4,"ngIf"],["quill-editor-element","",4,"ngIf"],["quill-editor-element",""]],template:function(t,i){1&t&&(e.F$t(ke),e.YNc(0,ze,3,2,"ng-container",0),e.Hsn(1),e.YNc(2,Ve,3,2,"ng-container",0)),2&t&&(e.Q6J("ngIf","top"!==i.toolbarPosition),e.xp6(2),e.Q6J("ngIf","top"===i.toolbarPosition))},dependencies:[g.ez,g.O5],styles:["[_nghost-%COMP%]{display:inline-block}"]}),n})(),Ne=(()=>{class n{constructor(t,i){this.sanitizer=t,this.service=i,this.content="",this.innerHTML="",this.themeClass="ql-snow"}ngOnChanges(t){if(t.theme?this.themeClass=`ql-${t.theme.currentValue||(this.service.config.theme?this.service.config.theme:"snow")} ngx-quill-view-html`:this.theme||(this.themeClass=`ql-${this.service.config.theme?this.service.config.theme:"snow"} ngx-quill-view-html`),t.content){const i=t.content.currentValue,o=[!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1;this.innerHTML=o?i:this.sanitizer.bypassSecurityTrustHtml(i)}}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Q.H7),e.Y36(Z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["quill-view-html"]],inputs:{content:"content",theme:"theme",sanitize:"sanitize"},standalone:!0,features:[e.TTD,e.jDz],decls:2,vars:2,consts:[[1,"ql-container",3,"ngClass"],[1,"ql-editor",3,"innerHTML"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.qZA()),2&t&&(e.Q6J("ngClass",i.themeClass),e.xp6(1),e.Q6J("innerHTML",i.innerHTML,e.oJD))},dependencies:[g.ez,g.mk],styles:[".ql-container.ngx-quill-view-html{border:0}\n"],encapsulation:2}),n})(),Re=(()=>{class n{constructor(t,i,o,r,l,a){this.elementRef=t,this.renderer=i,this.zone=o,this.service=r,this.domSanitizer=l,this.platformId=a,this.strict=!0,this.customModules=[],this.customOptions=[],this.preserveWhitespace=!1,this.onEditorCreated=new e.vpe,this.preserve=!1,this.quillSubscription=null,this.valueSetter=(c,p)=>{const d=I(this.format,this.service.config.format);let h=p;if("text"===d)c.setText(h);else{if("html"===d)([!0,!1].includes(this.sanitize)?this.sanitize:this.service.config.sanitize||!1)&&(p=this.domSanitizer.sanitize(e.q3G.HTML,p)),h=c.clipboard.convert(p);else if("json"===d)try{h=JSON.parse(p)}catch{h=[{insert:p}]}c.setContents(h)}}}ngOnInit(){this.preserve=this.preserveWhitespace}ngOnChanges(t){this.quillEditor&&t.content&&this.valueSetter(this.quillEditor,t.content.currentValue)}ngAfterViewInit(){(0,g.PM)(this.platformId)||(this.quillSubscription=this.service.getQuill().pipe((0,V.z)(t=>{const i=[this.service.registerCustomModules(t,this.customModules)],o=this.beforeRender??this.service.config.beforeRender;return o&&i.push(o()),Promise.all(i).then(()=>t)})).subscribe(t=>{const i=Object.assign({},this.modules||this.service.config.modules);i.toolbar=!1,this.customOptions.forEach(a=>{const c=t.import(a.import);c.whitelist=a.whitelist,t.register(c,!0)});let o=this.debug;!o&&!1!==o&&this.service.config.debug&&(o=this.service.config.debug);let r=this.formats;!r&&void 0===r&&(r=this.service.config.formats?Object.assign({},this.service.config.formats):null===this.service.config.formats?null:void 0);const l=this.theme||(this.service.config.theme?this.service.config.theme:"snow");this.editorElem=this.elementRef.nativeElement.querySelector("[quill-view-element]"),this.zone.runOutsideAngular(()=>{this.quillEditor=new t(this.editorElem,{debug:o,formats:r,modules:i,readOnly:!0,strict:this.strict,theme:l})}),this.renderer.addClass(this.editorElem,"ngx-quill-view"),this.content&&this.valueSetter(this.quillEditor,this.content),this.onEditorCreated.observers.length&&requestAnimationFrame(()=>{this.onEditorCreated.emit(this.quillEditor),this.onEditorCreated.complete()})}))}ngOnDestroy(){this.quillSubscription?.unsubscribe(),this.quillSubscription=null}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.Qsj),e.Y36(e.R0b),e.Y36(Z),e.Y36(Q.H7),e.Y36(e.Lbi))},n.\u0275cmp=e.Xpm({type:n,selectors:[["quill-view"]],inputs:{format:"format",theme:"theme",modules:"modules",debug:"debug",formats:"formats",sanitize:"sanitize",beforeRender:"beforeRender",strict:"strict",content:"content",customModules:"customModules",customOptions:"customOptions",preserveWhitespace:"preserveWhitespace"},outputs:{onEditorCreated:"onEditorCreated"},standalone:!0,features:[e.TTD,e.jDz],decls:2,vars:2,consts:[["quill-view-element","",4,"ngIf"],["quill-view-element",""]],template:function(t,i){1&t&&(e.YNc(0,Je,1,0,"div",0),e.YNc(1,Ue,1,0,"pre",0)),2&t&&(e.Q6J("ngIf",!i.preserve),e.xp6(1),e.Q6J("ngIf",i.preserve))},dependencies:[g.ez,g.O5],styles:[".ql-container.ngx-quill-view{border:0}\n"],encapsulation:2}),n})(),He=(()=>{class n{static forRoot(t){return{ngModule:n,providers:[{provide:j,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[K,Re,Ne]}),n})();const je=function(n){return{"!cursor-not-allowed":n}};class P{constructor(s,t){this.userService=s,this.dataService=t,this.displayUser="",this.updateData$=new A.x,this.htmlText="",this.stayAnon=!0,this.quillStyle={background:"rgb(241,245,249)","border-width":"0px 0px 0px 0px","font-size":"16px"},this.quillFormats=["bold","code","italic","strike","script","underline","indent","list","align","direction","code-block","formula"],this.quillConfig={toolbar:{container:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["code-block"]]}}}ngOnInit(){}onContextMenu(s){}onPaste(s){}onDragAndDrop(s){s.preventDefault()}onPost(){const s={anon:this.stayAnon,comment:!1,comment_on:null,content:this.htmlText,from:this.userService.username$.getValue()?this.userService.username$.getValue():null,to:this.displayUser};this.dataService.createPost(s).pipe((0,U.q)(1)).subscribe({next:t=>this.updateData$.next()}),this.htmlText=""}onAnonToggle(){this.userService.userIsLoggedIn$.getValue()||alert("Please log in to disable anonymity")}}P.\u0275fac=function(s){return new(s||P)(e.Y36(N.K),e.Y36(Y.D))},P.\u0275cmp=e.Xpm({type:P,selectors:[["app-create-post"]],hostBindings:function(s,t){1&s&&e.NdJ("drop",function(o){return t.onDragAndDrop(o)})},inputs:{displayUser:"displayUser",updateData$:"updateData$"},decls:16,vars:14,consts:[[1,"bg-slate-200","rounded-2xl","w-full","relative","shadow-2xl",3,"contextmenu"],[1,"w-full","h-max","overflow-hidden","rounded-2xl","bg-slate-100"],["placeholder","Tell me something anonymously.. or not",1,"w-full","bg-slate-200",3,"ngModel","styles","modules","formats","sanitize","ngModelChange","paste"],[1,"absolute","top-1","right-2","flex","justify-between","items-center","gap-4","overflow-hidden"],[1,"flex","gap-2"],[1,"relative","flex","cursor-pointer","items-center",3,"ngClass","click"],["type","checkbox","checked","",1,"hidden",3,"disabled","ngModel","ngModelChange"],[1,"relative","h-5","w-10","flex-shrink-0","rounded-full","bg-gray-300","toggle-bg"],[1,"toggle-btn","z-1","absolute","inset-y-0","right-0","left-0","top-0","flex","h-max","w-max","items-center","justify-center","rounded-full","transition-all"],[1,"h-5","w-5","rounded-full","bg-blue-500"],[1,"ml-3","text-gray-700"],[1,"bg-slate-900","hover:bg-slate-800","focus:bg-slate-900","text-white","hover:scale-105","transition-all","font-medium","py-1","px-4","rounded-full","w-24","border","border-black",3,"click"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0),e.NdJ("contextmenu",function(o){return t.onContextMenu(o)}),e.TgZ(1,"div",1)(2,"quill-editor",2),e.NdJ("ngModelChange",function(o){return t.htmlText=o})("paste",function(o){return t.onPaste(o)}),e.qZA()(),e.TgZ(3,"div",3)(4,"div",4)(5,"label",5),e.NdJ("click",function(){return t.onAnonToggle()}),e.ALo(6,"async"),e.TgZ(7,"input",6),e.NdJ("ngModelChange",function(o){return t.stayAnon=o}),e.ALo(8,"async"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8),e._UZ(11,"div",9),e.qZA()(),e.TgZ(12,"span",10),e._uU(13,"Stay anonymous"),e.qZA()()(),e.TgZ(14,"button",11),e.NdJ("click",function(){return t.onPost()}),e._uU(15," Post "),e.qZA()()()),2&s&&(e.xp6(2),e.Q6J("ngModel",t.htmlText)("styles",t.quillStyle)("modules",t.quillConfig)("formats",t.quillFormats)("sanitize",!0),e.xp6(3),e.Q6J("ngClass",e.VKq(12,je,!e.lcZ(6,8,t.userService.userIsLoggedIn$))),e.xp6(2),e.Q6J("disabled",!e.lcZ(8,10,t.userService.userIsLoggedIn$))("ngModel",t.stayAnon))},dependencies:[g.mk,w.Wl,w.JJ,w.On,K,g.Ov],styles:["input[_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%] > .toggle-btn[_ngcontent-%COMP%]{left:calc(100% - 20px)}input[_ngcontent-%COMP%]:checked + div.toggle-bg[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:rgb(147 197 253 / var(--tw-bg-opacity))}"]});const $e=["posts"],Be=function(n){return{"mb-16":n}};function Ge(n,s){if(1&n&&(e.TgZ(0,"div",6,7),e._UZ(2,"app-post-card",8),e.qZA()),2&n){const t=s.$implicit,i=s.index,o=e.oxw().ngIf;e.Q6J("ngClass",e.VKq(2,Be,i===o.data.posts.length-1)),e.xp6(2),e.Q6J("postData",t)}}function We(n,s){1&n&&(e.ynx(0),e.TgZ(1,"div",9),e._uU(2,"No whispers yet!"),e.qZA(),e.BQk())}function Ke(n,s){if(1&n){const t=e.EpF();e.ynx(0),e.TgZ(1,"div",1)(2,"app-profile-card",2),e.NdJ("whispersClicked",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.scrollToPosts())}),e.qZA(),e.TgZ(3,"div",3),e._UZ(4,"app-create-post",4),e.qZA(),e.YNc(5,Ge,3,4,"div",5),e.YNc(6,We,3,0,"ng-container",0),e.qZA(),e.BQk()}if(2&n){const t=s.ngIf,i=e.oxw();e.xp6(2),e.Q6J("userData",t)("cardSize","lg"),e.xp6(2),e.Q6J("displayUser",t.username)("updateData$",i.updateData$),e.xp6(1),e.Q6J("ngForOf",t.data.posts),e.xp6(1),e.Q6J("ngIf",0===t.data.posts.length)}}class L{constructor(s,t,i){this.activatedRoute=s,this.dataService=t,this.router=i,this.userData$=new ee.X({username:"",name:"",data:{currentUser:"",followingList:[],followerList:[],posts:[]}}),this.updateData$=new A.x,this.unsubscribe$=new A.x,this.postsToRetrieveOnInit=5,this.postsToRetrieve=5}ngOnInit(){this.getUserData(this.postsToRetrieveOnInit),this.updateData$.pipe((0,J.R)(this.unsubscribe$)).subscribe(()=>{this.getUserData(this.postsToRetrieve)}),this.router.events.pipe((0,te.h)(s=>s instanceof x.m2),(0,J.R)(this.unsubscribe$)).subscribe(()=>{this.getUserData(this.postsToRetrieveOnInit)})}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}getUserData(s){this.dataService.getUser(this.activatedRoute.snapshot.url[0].path,s).pipe((0,ie.U)(t=>this.userData$.next(t)),(0,U.q)(1)).subscribe({next(t){},error(t){},complete(){}})}scrollToPosts(){console.log(this.posts),this.posts?.get(0)?.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})}onScroll(s){Math.ceil(window.scrollY)===document.documentElement.scrollHeight-window.innerHeight&&(this.postsToRetrieve+=this.postsToRetrieveOnInit,this.updateData$.next())}}L.\u0275fac=function(s){return new(s||L)(e.Y36(x.gz),e.Y36(Y.D),e.Y36(x.F0))},L.\u0275cmp=e.Xpm({type:L,selectors:[["app-profile"]],viewQuery:function(s,t){if(1&s&&e.Gf($e,5),2&s){let i;e.iGM(i=e.CRH())&&(t.posts=i)}},hostBindings:function(s,t){1&s&&e.NdJ("scroll",function(o){return t.onScroll(o)},!1,e.Jf7)},decls:2,vars:3,consts:[[4,"ngIf"],[1,"flex","flex-col","items-center"],[1,"max-w-5/6","w-[48rem]","block","shadow-2xl","mb-8",3,"userData","cardSize","whispersClicked"],[1,"shadow-2xl","w-[48rem]","mb-8"],[3,"displayUser","updateData$"],["class","mb-8 shadow-2xl max-w-5/6 w-[48rem] block scroll-mt-20",3,"ngClass",4,"ngFor","ngForOf"],[1,"mb-8","shadow-2xl","max-w-5/6","w-[48rem]","block","scroll-mt-20",3,"ngClass"],["posts",""],[3,"postData"],[1,"text-2xl","mt-12"]],template:function(s,t){1&s&&(e.YNc(0,Ke,7,6,"ng-container",0),e.ALo(1,"async")),2&s&&e.Q6J("ngIf",e.lcZ(1,1,t.userData$))},dependencies:[g.mk,g.sg,g.O5,ne.i,q,P,g.Ov]});const Xe=[{path:"**",component:L}];class E{}E.\u0275fac=function(s){return new(s||E)},E.\u0275mod=e.oAB({type:E}),E.\u0275inj=e.cJS({imports:[x.Bz.forChild(Xe),x.Bz]});var et=u(1340);class _{}_.\u0275fac=function(s){return new(s||_)},_.\u0275mod=e.oAB({type:_}),_.\u0275inj=e.cJS({imports:[g.ez]});class T{}T.\u0275fac=function(s){return new(s||T)},T.\u0275mod=e.oAB({type:T}),T.\u0275inj=e.cJS({imports:[g.ez,w.u5,He.forRoot()]});class M{}M.\u0275fac=function(s){return new(s||M)},M.\u0275mod=e.oAB({type:M}),M.\u0275inj=e.cJS({imports:[g.ez,E,et.u,_,T]})}}]);